function e(){let e=localStorage.getItem("portfolio");return e?JSON.parse(e):[]}function t(e){localStorage.setItem("portfolio",JSON.stringify(e))}function n(){let t=e(),n=0;return t.forEach(e=>{n+=1*e.quantity}),n}function o(){let e=n();document.getElementById("portfolio-value").innerText=e.toFixed(2)}const r="https://api.coingecko.com/api/v3";async function a(e){let t=`${r}/simple/price?ids=${e}&vs_currencies=usd`;try{let n=await fetch(t);if(!n.ok)throw Error(`Error fetching price for ${e}: ${n.statusText}`);let o=await n.json();return o[e]?.usd||null}catch(e){return console.error(e),null}}async function l(e){let t=`${r}/search?query=${e}`;try{let e=await fetch(t);if(!e.ok)throw Error(`Error fetching crypto list: ${e.statusText}`);return(await e.json()).coins.map(e=>({id:e.id,name:e.name,symbol:e.symbol}))}catch(e){return console.error(e),[]}}document.addEventListener("DOMContentLoaded",()=>{(function n(){let r=e(),a=document.getElementById("portfolio-container");if(a.innerHTML="",0===r.length){a.innerHTML="<p>Your portfolio is empty</p>";return}r.forEach(e=>{let t=document.createElement("div");t.className="portfolio-item",t.innerHTML=`
        <p>${e.name}: ${e.quantity}</p>
        <button class="remove-btn" data-name="${e.name}">Remove</button>
      `,a.appendChild(t)}),document.querySelectorAll(".remove-btn").forEach(r=>{r.addEventListener("click",r=>{var a;a=r.target.getAttribute("data-name"),t(e().filter(e=>e.name!==a)),n(),o()})})})(),o(),document.getElementById("crypto-form").addEventListener("submit",async r=>{r.preventDefault();let l=document.getElementById("crypto-name").value,i=parseFloat(document.getElementById("crypto-quantity").value);await a(l.toLowerCase())?(function(n,r){let a=e(),l=a.find(e=>e.name===n);l?l.quantity+=r:a.push({name:n,quantity:r}),t(a),o()}(l,i),document.getElementById("portfolio-value").innerText=n().toFixed(2),document.getElementById("crypto-name").value="",document.getElementById("crypto-quantity").value=""):alert("Cryptocurrency not found or price unavailable.")});let r=document.getElementById("crypto-name"),i=document.getElementById("crypto-dropdown");r.addEventListener("input",async e=>{let t=e.target.value;0===t.length?(i.innerHTML="",i.style.display="none"):t.length>2&&function(e){let t=document.getElementById("crypto-dropdown");t.innerHTML="",e.length>0?(e.forEach(e=>{let n=document.createElement("div");n.classList.add("dropdown-item"),n.textContent=`${e.name} (${e.symbol.toUpperCase()})`,n.dataset.id=e.id,n.addEventListener("click",()=>{document.getElementById("crypto-name").value=e.name,t.innerHTML="",t.style.display="none"}),t.appendChild(n)}),t.style.display="block"):t.style.display="none"}(await l(t))}),document.addEventListener("click",e=>{let t=r.contains(e.target),n=i.contains(e.target);t||n||(i.style.display="none")}),r.addEventListener("focus",()=>{r.value.length>2&&(i.style.display="block")})});
//# sourceMappingURL=index.3a4b875a.js.map
